import React from "react";
import { useLocation } from "react-router-dom";
import { useSelector } from "react-redux";
import { useTranslation } from "react-i18next";

const categoryTranslations = {
  ar: {
    Photographie: 'التصوير الفوتوغرافي',
    photographie_argentique: 'التصوير الفوتوغرافي التقليدي',
    Peinture: 'الرسم',
    huile: 'زيت',
    Sculpture: 'النحت',
    aluminium: 'الألومنيوم',
  },
  fr: {
    Photographie: 'Photographie',
    photographie_argentique: 'Photographie argentique',
    Peinture: 'Peinture',
    huile: 'Huile',
    Sculpture: 'Sculpture',
    aluminium: 'Aluminium',
  },
  es: {
    Photographie: 'Fotografía',
    photographie_argentique: 'Fotografía analógica',
    Peinture: 'Pintura',
    huile: 'Óleo',
    Sculpture: 'Escultura',
    aluminium: 'Aluminio',
  }
};

const CardBodyTitle = ({ post }) => {
  const location = useLocation();
  const isDetailPage = location.pathname === `/post/${post._id}`;

  const { languageReducer } = useSelector(state => state);
  const { t } = useTranslation();
  const lang = languageReducer.language || 'fr'; // idioma actual

  // Traducción dinámica de category y subcategory
  const translatedCategory = categoryTranslations[lang][post.category] || post.category;
  const translatedSubcategory = categoryTranslations[lang][post.subcategory] || post.subcategory;

  return (
    <div className="cardtitle">
      <div className="card-header">
        {!isDetailPage && (
          <div>
            <div className="title-post">
              <div className="title0">{t('post.category', { lng: lang })}: {translatedCategory}</div>
              <div className="title0">{t('post.subcategory', { lng: lang })}: {translatedSubcategory}</div>
            </div>
          </div>
        )}
      </div>

      {!isDetailPage && (
        <div className="titlelocation">
          <span><i className="fas fa-map-marker-alt"></i></span>
          <div className="title4">{post.wilaya}</div>
          <div className="title4">{post.commune},</div>
          <div>
            <span className="ml-1 mr-1 text-danger">{post.price}</span> <span>{post.unidaddeprecio}</span> <span> </span>
          </div>
        </div>
      )}
    </div>
  );
};

export default CardBodyTitle;
